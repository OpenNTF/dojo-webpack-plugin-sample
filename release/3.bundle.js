webpackJsonp.registerAbsMids({"dijit/Editor":149,"dijit/Toolbar":150,"dijit/ToolbarSeparator":151,"dijit/_editor/_Plugin":152,"dijit/_editor/plugins/EnterKeyHandling":153,"dijit/_editor/RichText":154,"dojo/_base/unload":155,"dijit/selection":156,"dijit/_editor/range":157,"dijit/_editor/html":158,"dojo/i18n!dijit/_editor/nls/commands":159,"dijit/_editor/nls/commands":160}),webpackJsonp([3],{149:function(e,t,i){var n,o;n=[i.dj.c(149),i(13),i(33),i(18),i(97),i(40),i(35),i(36),i(37),i(47),i(9),i(10),i(84),i(43),i(68),i(150),i(151),i(56),i(89),i(152),i(153),i(158),i(157),i(154),i(51),i(159)],o=function(e,t,i,n,o,s,r,a,l,d,h,c,u,m,f,g,p,v,b,C,y,_,N,E,w){function S(e){return new C({command:e.name})}function T(e){return new C({buttonClass:b,command:e.name})}var k=i("dijit.Editor",E,{plugins:null,extraPlugins:null,constructor:function(){h.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",y]),this._plugins=[],this._editInterval=1e3*this.editActionInterval,(c("ie")||c("trident"))&&(this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate"))},postMixInProperties:function(){this.setValueDeferred=new n,this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this._steps=this._steps.slice(0),this._undoedSteps=this._undoedSteps.slice(0),h.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins)),this.commands=o.getLocalization("dijit._editor","commands",this.lang),c("webkit")&&l.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments),this.toolbar||(this.toolbar=new g({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode)),t.forEach(this.plugins,this.addPlugin,this),this.setValueDeferred.resolve(!0),r.add(this.iframe.parentNode,"dijitEditorIFrameContainer"),r.add(this.iframe,"dijitEditorIFrame"),s.set(this.iframe,"allowTransparency",!0),this.toolbar.startup(),this.onNormalizedDisplayChanged()},destroy:function(){t.forEach(this._plugins,function(e){e&&e.destroy&&e.destroy()}),this._plugins=[],this.toolbar.destroyRecursive(),delete this.toolbar,this.inherited(arguments)},addPlugin:function(t,i){var n=h.isString(t)?{name:t}:h.isFunction(t)?{ctor:t}:t;if(!n.setEditor){var o={args:n,plugin:null,editor:this};if(n.name&&(C.registry[n.name]?o.plugin=C.registry[n.name](n):m.publish(w._scopeName+".Editor.getPlugin",o)),!o.plugin)try{var s=n.ctor||h.getObject(n.name)||e(n.name);s&&(o.plugin=new s(n))}catch(e){throw new Error(this.id+": cannot find plugin ["+n.name+"]")}if(!o.plugin)throw new Error(this.id+": cannot find plugin ["+n.name+"]");t=o.plugin}arguments.length>1?this._plugins[i]=t:this._plugins.push(t),t.setEditor(this),h.isFunction(t.setToolbar)&&t.setToolbar(this.toolbar)},resize:function(e){e&&v.prototype.resize.apply(this,arguments)},layout:function(){var e=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+a.getPadBorderExtents(this.iframe.parentNode).h+a.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=e+"px",this.iframe&&(this.iframe.style.height="100%"),this._layoutMode=!0},_onIEMouseDown:function(e){var t,i=this.document.body,n=i.clientWidth,o=i.clientHeight,s=i.clientLeft,r=i.offsetWidth,a=i.offsetHeight,l=i.offsetLeft;/^rtl$/i.test(i.dir||"")?n<r&&e.x>n&&e.x<r&&(t=!0):e.x<s&&e.x>l&&(t=!0),t||o<a&&e.y>o&&e.y<a&&(t=!0),t||(delete this._cursorToStart,delete this._savedSelection,"BODY"==e.target.tagName&&this.defer("placeCursorAtEnd"),this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(e){this.customUndo&&this.endEditing(!0),"BODY"!=e.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(e){this._inEditing||(this._inEditing=!0,this._beginEditing(e)),this.editActionInterval>0&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(e){if(!this.customUndo||"undo"!=e&&"redo"!=e){this.customUndo&&(this.endEditing(),this._beginEditing());var t=this.inherited(arguments);return this.customUndo&&this._endEditing(),t}return this[e]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(e){var t;try{if(t=this.document.execCommand(e,!1,null),c("webkit")&&!t)throw{code:1011}}catch(o){if(1011==o.code||9==o.code&&c("opera")){var i=u.substitute,n={cut:"X",copy:"C",paste:"V"};alert(i(this.commands.systemShortcut,[this.commands[e],i(this.commands[c("mac")?"appleKey":"ctrlKey"],[n[e]])]))}t=!1}return t},queryCommandEnabled:function(e){return!this.customUndo||"undo"!=e&&"redo"!=e?this.inherited(arguments):"undo"==e?this._steps.length>1:this._undoedSteps.length>0},_moveToBookmark:function(e){var i,n,o,s,r=e.mark,a=e.mark,l=e.isCollapsed;a&&(c("ie")<9||9===c("ie")&&c("quirks")?h.isArray(a)?(r=[],t.forEach(a,function(e){r.push(N.getNode(e,this.editNode))},this),this.selection.moveToBookmark({mark:r,isCollapsed:l})):a.startContainer&&a.endContainer&&(s=N.getSelection(this.window),s&&s.removeAllRanges&&(s.removeAllRanges(),i=N.create(this.window),n=N.getNode(a.startContainer,this.editNode),o=N.getNode(a.endContainer,this.editNode),n&&o&&(i.setStart(n,a.startOffset),i.setEnd(o,a.endOffset),s.addRange(i)))):(s=N.getSelection(this.window),s&&s.removeAllRanges&&(s.removeAllRanges(),i=N.create(this.window),n=N.getNode(a.startContainer,this.editNode),o=N.getNode(a.endContainer,this.editNode),n&&o&&(i.setStart(n,a.startOffset),i.setEnd(o,a.endOffset),s.addRange(i)))))},_changeToStep:function(e,t){this.setValue(t.text);var i=t.bookmark;i&&this._moveToBookmark(i)},undo:function(){var e=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var t=this._steps.pop();t&&this._steps.length>0&&(this.focus(),this._changeToStep(t,this._steps[this._steps.length-1]),this._undoedSteps.push(t),this.onDisplayChanged(),delete this._undoRedoActive,e=!0),delete this._undoRedoActive}return e},redo:function(){var e=!1;if(!this._undoRedoActive){this._undoRedoActive=!0,this.endEditing(!0);var t=this._undoedSteps.pop();t&&this._steps.length>0&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],t),this._steps.push(t),this.onDisplayChanged(),e=!0),delete this._undoRedoActive}return e},endEditing:function(e){this._editTimer&&(this._editTimer=this._editTimer.remove()),this._inEditing&&(this._endEditing(e),this._inEditing=!1)},_getBookmark:function(){var e=this.selection.getBookmark(),i=[];if(e&&e.mark){var n=e.mark;if(c("ie")<9||9===c("ie")&&c("quirks")){var o=N.getSelection(this.window);if(h.isArray(n))t.forEach(e.mark,function(e){i.push(N.getIndex(e,this.editNode).o)},this),e.mark=i;else if(o){var s;o.rangeCount&&(s=o.getRangeAt(0)),s?e.mark=s.cloneRange():e.mark=this.selection.getBookmark()}}try{e.mark&&e.mark.startContainer&&(i=N.getIndex(e.mark.startContainer,this.editNode).o,e.mark={startContainer:i,startOffset:e.mark.startOffset,endContainer:e.mark.endContainer===e.mark.startContainer?i:N.getIndex(e.mark.endContainer,this.editNode).o,endOffset:e.mark.endOffset})}catch(t){e.mark=null}}return e},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:_.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var e=_.getChildrenHtml(this.editNode);this._undoedSteps=[],this._steps.push({text:e,bookmark:this._getBookmark()})},onKeyDown:function(e){if(c("ie")||this.iframe||e.keyCode!=d.TAB||this.tabIndent||this._saveSelection(),!this.customUndo)return void this.inherited(arguments);var t=e.keyCode;if(e.ctrlKey&&!e.shiftKey&&!e.altKey){if(90==t||122==t)return e.stopPropagation(),e.preventDefault(),void this.undo();if(89==t||121==t)return e.stopPropagation(),e.preventDefault(),void this.redo()}switch(this.inherited(arguments),t){case d.ENTER:case d.BACKSPACE:case d.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing(),88==e.keyCode?this.beginEditing("cut"):this.beginEditing("paste"),this.defer("endEditing",1);break}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<d.F1||e.keyCode>d.F15)){this.beginEditing();break}case d.ALT:this.endEditing();break;case d.UP_ARROW:case d.DOWN_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:case d.HOME:case d.END:case d.PAGE_UP:case d.PAGE_DOWN:this.endEditing(!0);break;case d.CTRL:case d.SHIFT:case d.TAB:}},_onBlur:function(){this.inherited(arguments),this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(e){}},_restoreSelection:function(){this._savedSelection&&(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0),this.inherited(arguments)},replaceValue:function(e){this.customUndo?this.isClosed?this.setValue(e):(this.beginEditing(),e||(e="&#160;"),this.setValue(e),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(e){this.setValueDeferred.then(h.hitch(this,function(){!this.disabled&&e||!this._buttonEnabledPlugins&&e?t.forEach(this._plugins,function(e){e.set("disabled",!0)}):this.disabled&&!e&&t.forEach(this._plugins,function(e){e.set("disabled",!1)})})),this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&l.set(this.document.body,"color",l.get(this.iframe,"color"))}catch(e){}}});return h.mixin(C.registry,{undo:S,redo:S,cut:S,copy:S,paste:S,insertOrderedList:S,insertUnorderedList:S,indent:S,outdent:S,justifyCenter:S,justifyFull:S,justifyLeft:S,justifyRight:S,delete:S,selectAll:S,removeFormat:S,unlink:S,insertHorizontalRule:S,bold:T,italic:T,underline:T,strikethrough:T,subscript:T,superscript:T,"|":function(){return new C({setEditor:function(e){this.editor=e,this.button=new p({ownerDocument:e.ownerDocument})}})}}),k}.apply(null,n),!(void 0!==o&&(e.exports=o))},150:function(e,t,i){var n,o;n=[i.dj.c(150),i(33),i(5),i(47),i(3),i(57),i(109),i(72)],o=function(e,t,i,n,o,s,r,a){return i("dijit-legacy-requires")&&o(0,function(){var t=["dijit/ToolbarSeparator"];e(t)}),t("dijit.Toolbar",[s,a,r],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})}.apply(null,n),!(void 0!==o&&(e.exports=o))},151:function(e,t,i){var n,o;n=[i(33),i(14),i(57),i(72)],o=function(e,t,i,n){return e("dijit.ToolbarSeparator",[i,n],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}.apply(null,n),!(void 0!==o&&(e.exports=o))},152:function(e,t,i){var n,o;n=[i(42),i(33),i(9),i(54),i(90)],o=function(e,t,i,n,o){var s=t("dijit._editor._Plugin",n,{constructor:function(e){this.params=e||{},i.mixin(this,this.params),this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:o,disabled:!1,getLabel:function(e){return this.editor.commands[e]},_initButton:function(){if(this.command.length){var e=this.getLabel(this.command),t=this.editor,n=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var o=i.mixin({label:e,ownerDocument:t.ownerDocument,dir:t.dir,lang:t.lang,showLabel:!1,iconClass:n,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});delete o.name,this.button=new this.buttonClass(o)}}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive(),this.inherited(arguments)},connect:function(t,i,n){this.own(e.connect(t,i,this,n))},updateState:function(){var e,t,i=this.editor,n=this.command;if(i&&i.isLoaded&&n.length){var o=this.get("disabled");if(this.button)try{t=!o&&i.queryCommandEnabled(n),this.enabled!==t&&(this.enabled=t,this.button.set("disabled",!t)),t&&"boolean"==typeof this.button.checked&&(e=i.queryCommandState(n),this.checked!==e&&(this.checked=e,this.button.set("checked",i.queryCommandState(n))))}catch(e){console.log(e)}}},setEditor:function(e){this.editor=e,this._initButton(),this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",i.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none"),this.own(this.editor.on("NormalizedDisplayChanged",i.hitch(this,"updateState")))},setToolbar:function(e){this.button&&e.addChild(this.button)},set:function(e,t){if("object"==typeof e){for(var i in e)this.set(i,e[i]);return this}var n=this._getAttrNames(e);if(this[n.s])var o=this[n.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(e,t);return o||this},get:function(e){var t=this._getAttrNames(e);return this[t.g]?this[t.g]():this[e]},_setDisabledAttr:function(e){this._set("disabled",e),this.updateState()},_getAttrNames:function(e){var t=this._attrPairNames;if(t[e])return t[e];var i=e.charAt(0).toUpperCase()+e.substr(1);return t[e]={s:"_set"+i+"Attr",g:"_get"+i+"Attr"}},_set:function(e,t){this[e]=t}});return s.registry={},s}.apply(null,n),!(void 0!==o&&(e.exports=o))},153:function(e,t,i){var n,o;n=[i(33),i(39),i(47),i(9),i(25),i(10),i(15),i(63),i(152),i(154),i(157)],o=function(e,t,i,n,o,s,r,a,l,d,h){return e("dijit._editor.plugins.EnterKeyHandling",l,{blockNodeForEnter:"BR",constructor:function(e){e&&("blockNodeForEnter"in e&&(e.blockNodeForEnter=e.blockNodeForEnter.toUpperCase()),n.mixin(this,e))},setEditor:function(e){if(this.editor!==e)if(this.editor=e,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,e.onLoadDeferred.then(n.hitch(this,function(t){return this.own(o(e.document,"keydown",n.hitch(this,function(e){if(e.keyCode==i.ENTER){var t=n.mixin({},e);t.shiftKey=!0,this.handleEnterKey(t)||(e.stopPropagation(),e.preventDefault())}}))),s("ie")>=9&&s("ie")<=10&&this.own(o(e.document,"paste",n.hitch(this,function(e){setTimeout(n.hitch(this,function(){var e=this.editor.document.selection.createRange();e.move("character",-1),e.select(),e.move("character",1),e.select()}),0)}))),t}));else if(this.blockNodeForEnter){var t=n.hitch(this,"handleEnterKey");e.addKeyHandler(13,0,0,t),e.addKeyHandler(13,0,1,t),this.own(this.editor.on("KeyPressed",n.hitch(this,"onKeyPressed")))}},onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var e=this.editor.selection.getAncestorElement("LI");if(e){s("mozilla")&&"LI"==e.parentNode.parentNode.nodeName&&(e=e.parentNode.parentNode);var t=e.firstChild;if(t&&1==t.nodeType&&("UL"==t.nodeName||"OL"==t.nodeName)){e.insertBefore(t.ownerDocument.createTextNode(" "),t);var i=h.create(this.editor.window);i.setStart(e.firstChild,0);var n=h.getSelection(this.editor.window,!0);n.removeAllRanges(),n.addRange(i)}}else{d.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var o=this.editor.selection.getAncestorElement(this.blockNodeForEnter);if(o){if(o.innerHTML=this.bogusHtmlContent,s("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1),r.select()}}else console.error("onKeyPressed: Cannot find the new block node")}}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var i,n,o,r,l,c,u,m,f,g=this.editor.document;if(e.shiftKey){var p=this.editor.selection.getParentElement(),v=h.getAncestor(p,this.blockNodes);if(v){if("LI"==v.tagName)return!0;if(i=h.getSelection(this.editor.window),n=i.getRangeAt(0),n.collapsed||(n.deleteContents(),i=h.getSelection(this.editor.window),n=i.getRangeAt(0)),h.atBeginningOfContainer(v,n.startContainer,n.startOffset))u=g.createElement("br"),o=h.create(this.editor.window),v.insertBefore(u,v.firstChild),o.setStartAfter(u),i.removeAllRanges(),i.addRange(o);else{if(!h.atEndOfContainer(v,n.startContainer,n.startOffset))return m=n.startContainer,!m||3!=m.nodeType||(f=m.nodeValue,r=g.createTextNode(f.substring(0,n.startOffset)),l=g.createTextNode(f.substring(n.startOffset)),c=g.createElement("br"),""==l.nodeValue&&s("webkit")&&(l=g.createTextNode(" ")),t.place(r,m,"after"),t.place(c,r,"after"),t.place(l,c,"after"),t.destroy(m),o=h.create(this.editor.window),o.setStart(l,0),i.removeAllRanges(),i.addRange(o),!1);o=h.create(this.editor.window),u=g.createElement("br"),v.appendChild(u),v.appendChild(g.createTextNode(" ")),o.setStart(v.lastChild,0),i.removeAllRanges(),i.addRange(o)}}else if(i=h.getSelection(this.editor.window),i.rangeCount){if(n=i.getRangeAt(0),n&&n.startContainer)if(n.collapsed||(n.deleteContents(),i=h.getSelection(this.editor.window),n=i.getRangeAt(0)),m=n.startContainer,m&&3==m.nodeType){var b=n.startOffset;m.length<b&&(T=this._adjustNodeAndOffset(m,b),m=T.node,b=T.offset),f=m.nodeValue,r=g.createTextNode(f.substring(0,b)),l=g.createTextNode(f.substring(b)),c=g.createElement("br"),l.length||(l=g.createTextNode(" ")),r.length?t.place(r,m,"after"):r=m,t.place(c,r,"after"),t.place(l,c,"after"),t.destroy(m),o=h.create(this.editor.window),o.setStart(l,0),o.setEnd(l,l.length),i.removeAllRanges(),i.addRange(o),this.editor.selection.collapse(!0)}else{var C;n.startOffset>=0&&(C=m.childNodes[n.startOffset]);var c=g.createElement("br"),l=g.createTextNode(" ");C?(t.place(c,C,"before"),t.place(l,c,"after")):(m.appendChild(c),m.appendChild(l)),o=h.create(this.editor.window),o.setStart(l,0),o.setEnd(l,l.length),i.removeAllRanges(),i.addRange(o),this.editor.selection.collapse(!0)}}else d.prototype.execCommand.call(this.editor,"inserthtml","<br>");return!1}var y=!0;i=h.getSelection(this.editor.window),n=i.getRangeAt(0),n.collapsed||(n.deleteContents(),i=h.getSelection(this.editor.window),n=i.getRangeAt(0));var _=h.getBlockAncestor(n.endContainer,null,this.editor.editNode),N=_.blockNode;if(this._checkListLater=N&&("LI"==N.nodeName||"LI"==N.parentNode.nodeName))return s("mozilla")&&(this._pressedEnterInBlock=N),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(N.innerHTML)&&(N.innerHTML="",s("webkit")&&(o=h.create(this.editor.window),o.setStart(N,0),i.removeAllRanges(),i.addRange(o)),this._checkListLater=!1),!0;if(!_.blockNode||_.blockNode===this.editor.editNode){try{d.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(e){}if(_={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),blockContainer:this.editor.editNode},_.blockNode){if(_.blockNode!=this.editor.editNode&&!(_.blockNode.textContent||_.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(_.blockNode),!1}else _.blockNode=this.editor.editNode;i=h.getSelection(this.editor.window),n=i.getRangeAt(0)}var E=g.createElement(this.blockNodeForEnter);E.innerHTML=this.bogusHtmlContent,this.removeTrailingBr(_.blockNode);var w=n.endOffset,S=n.endContainer;if(S.length<w){var T=this._adjustNodeAndOffset(S,w);S=T.node,w=T.offset}if(h.atEndOfContainer(_.blockNode,S,w))_.blockNode===_.blockContainer?_.blockNode.appendChild(E):t.place(E,_.blockNode,"after"),y=!1,o=h.create(this.editor.window),o.setStart(E,0),i.removeAllRanges(),i.addRange(o),this.editor.height&&a.scrollIntoView(E);else if(h.atBeginningOfContainer(_.blockNode,n.startContainer,n.startOffset))t.place(E,_.blockNode,_.blockNode===_.blockContainer?"first":"before"),E.nextSibling&&this.editor.height&&(o=h.create(this.editor.window),o.setStart(E.nextSibling,0),i.removeAllRanges(),i.addRange(o),a.scrollIntoView(E.nextSibling)),y=!1;else{_.blockNode===_.blockContainer?_.blockNode.appendChild(E):t.place(E,_.blockNode,"after"),y=!1,_.blockNode.style&&E.style&&_.blockNode.style.cssText&&(E.style.cssText=_.blockNode.style.cssText),m=n.startContainer;var k;if(m&&3==m.nodeType){var x,A;w=n.endOffset,m.length<w&&(T=this._adjustNodeAndOffset(m,w),m=T.node,w=T.offset),f=m.nodeValue,r=g.createTextNode(f.substring(0,w)),l=g.createTextNode(f.substring(w,f.length)),t.place(r,m,"before"),t.place(l,m,"after"),t.destroy(m);for(var R=r.parentNode;R!==_.blockNode;){var L=R.tagName,I=g.createElement(L);for(R.style&&I.style&&R.style.cssText&&(I.style.cssText=R.style.cssText),"FONT"===R.tagName&&(R.color&&(I.color=R.color),R.face&&(I.face=R.face),R.size&&(I.size=R.size)),x=l;x;)A=x.nextSibling,I.appendChild(x),x=A;t.place(I,R,"after"),r=R,l=I,R=R.parentNode}for(x=l,(1==x.nodeType||3==x.nodeType&&x.nodeValue)&&(E.innerHTML=""),k=x;x;)A=x.nextSibling,E.appendChild(x),x=A}o=h.create(this.editor.window);var O,D=k;if("BR"!==this.blockNodeForEnter){for(;D;)O=D,A=D.firstChild,D=A;O&&O.parentNode?(E=O.parentNode,o.setStart(E,0),i.removeAllRanges(),i.addRange(o),this.editor.height&&a.scrollIntoView(E),s("mozilla")&&(this._pressedEnterInBlock=_.blockNode)):y=!0}else o.setStart(E,0),i.removeAllRanges(),i.addRange(o),this.editor.height&&a.scrollIntoView(E),s("mozilla")&&(this._pressedEnterInBlock=_.blockNode)}return y},_adjustNodeAndOffset:function(e,t){for(;e.length<t&&e.nextSibling&&3==e.nextSibling.nodeType;)t-=e.length,e=e.nextSibling;return{node:e,offset:t}},removeTrailingBr:function(e){var i=/P|DIV|LI/i.test(e.tagName)?e:this.editor.selection.getParentOfType(e,["P","DIV","LI"]);i&&(i.lastChild&&(i.childNodes.length>1&&3==i.lastChild.nodeType&&/^[\s\xAD]*$/.test(i.lastChild.nodeValue)||"BR"==i.lastChild.tagName)&&t.destroy(i.lastChild),i.childNodes.length||(i.innerHTML=this.bogusHtmlContent))}})}.apply(null,n),!(void 0!==o&&(e.exports=o))},154:function(e,t,i){var n,o;n=[i(13),i(7),i(33),i(101),i(14),i(40),i(35),i(39),i(36),i(37),i(4),i(47),i(9),i(25),i(28),i(8),i(10),i(43),i(155),i(16),i(63),i(57),i(92),i(156),i(157),i(158),i(62),i(51)],o=function(e,t,i,n,o,s,r,a,l,d,h,c,u,m,f,g,p,v,b,C,y,_,N,E,w,S,T,k){var x=i("dijit._editor.RichText",[_,N],{constructor:function(e){this.contentPreFilters=[],this.contentPostFilters=[],this.contentDomPreFilters=[],this.contentDomPostFilters=[],this.editingAreaStyleSheets=[],this.events=[].concat(this.events),this._keyHandlers={},e&&u.isString(e.value)&&(this.value=e.value),this.onLoadDeferred=new n},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs."),this.contentPreFilters=[u.trim,u.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters),p("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters)),p("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters)),(p("ie")||p("trident"))&&(this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[u.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters)),this.contentDomPostFilters=[u.hitch(this,"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters),this.inherited(arguments),v.publish(k._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments),this.open(),this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var e=u.hitch(this,function(e,t){return function(){return!this.execCommand(e,t)}}),t={b:e("bold"),i:e("italic"),u:e("underline"),a:e("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:e("formatblock","h1"),2:e("formatblock","h2"),3:e("formatblock","h3"),4:e("formatblock","h4"),"\\":e("insertunorderedlist")};p("ie")||(t.Z=e("redo"));var i;for(i in t)this.addKeyHandler(i,!0,!1,t[i])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(x._editorCommandsLocalized)return this._local2NativeFormatNames=x._local2NativeFormatNames,void(this._native2LocalFormatNames=x._native2LocalFormatNames);x._editorCommandsLocalized=!0,x._local2NativeFormatNames={},x._native2LocalFormatNames={},this._local2NativeFormatNames=x._local2NativeFormatNames,this._native2LocalFormatNames=x._native2LocalFormatNames;for(var e,t=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"],i="",n=0;e=t[n++];)i+="l"!==e.charAt(1)?"<"+e+"><span>content</span></"+e+"><br/>":"<"+e+"><li>content</li></"+e+"><br/>";var o={position:"absolute",top:"0px",zIndex:10,opacity:.01},s=a.create("div",{style:o,innerHTML:i});this.ownerDocumentBody.appendChild(s);var r=u.hitch(this,function(){for(var e=s.firstChild;e;)try{this.selection.selectElement(e.firstChild);var t=e.tagName.toLowerCase();this._local2NativeFormatNames[t]=document.queryCommandValue("formatblock"),this._native2LocalFormatNames[this._local2NativeFormatNames[t]]=t,e=e.nextSibling.nextSibling}catch(e){}a.destroy(s)});this.defer(r)},open:function(e){(!this.onLoadDeferred||this.onLoadDeferred.fired>=0)&&(this.onLoadDeferred=new n),this.isClosed||this.close(),v.publish(k._scopeName+"._editor.RichText::open",this),1===arguments.length&&e.nodeName&&(this.domNode=e);var i,l=this.domNode;if(u.isString(this.value))i=this.value,l.innerHTML="";else if(l.nodeName&&"textarea"==l.nodeName.toLowerCase()){var h=this.textarea=l;this.name=h.name,i=h.value,l=this.domNode=this.ownerDocument.createElement("div"),l.setAttribute("widgetId",this.id),h.removeAttribute("widgetId"),l.cssText=h.cssText,l.className+=" "+h.className,a.place(l,h,"before");var c=u.hitch(this,function(){if(d.set(h,{display:"block",position:"absolute",top:"-1000px"}),p("ie")){var e=h.style;this.__overflow=e.overflow,e.overflow="hidden"}});if(p("ie")?this.defer(c,10):c(),h.form){var f=h.value;this.reset=function(){var e=this.getValue();e!==f&&this.replaceValue(f)},m(h.form,"submit",u.hitch(this,function(){s.set(h,"disabled",this.disabled),h.value=this.getValue()}))}}else i=S.getChildrenHtml(l),l.innerHTML="";if(this.value=i,l.nodeName&&"LI"===l.nodeName&&(l.innerHTML=" <br>"),this.header=l.ownerDocument.createElement("div"),l.appendChild(this.header),this.editingArea=l.ownerDocument.createElement("div"),l.appendChild(this.editingArea),this.footer=l.ownerDocument.createElement("div"),l.appendChild(this.footer),this.name||(this.name=this.id+"_AUTOGEN"),""!==this.name&&(!t.useXDomain||t.allowXdRichTextSave)){var g=o.byId(k._scopeName+"._editor.RichText.value");if(g&&""!==g.value)for(var C,y=g.value.split(this._SEPARATOR),_=0;C=y[_++];){var N=C.split(this._NAME_CONTENT_SEP);if(N[0]===this.name){this.value=N[1],y=y.splice(_,1),g.value=y.join(this._SEPARATOR);break}}x._globalSaveHandler||(x._globalSaveHandler={},b.addOnUnload(function(){var e;for(e in x._globalSaveHandler){var t=x._globalSaveHandler[e];u.isFunction(t)&&t()}})),x._globalSaveHandler[this.id]=u.hitch(this,"_saveContent")}this.isClosed=!1;var w=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");w.id=this.id+"_iframe",w.style.border="none",w.style.width="100%",this._layoutMode?w.style.height="100%":p("ie")>=7?(this.height&&(w.style.height=this.height),this.minHeight&&(w.style.minHeight=this.minHeight)):w.style.height=this.height?this.height:this.minHeight,w.frameBorder=0,w._loadFunc=u.hitch(this,function(e){this.window=e,this.document=e.document,this.selection=new E.SelectionManager(e),p("ie")&&this._localizeEditorCommands(),this.onLoad(this.get("value"))});var T,A=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");T=p("ie")<11?'javascript:document.open();try{parent.window;}catch(e){document.domain="'+document.domain+"\";}document.write('"+A+"');document.close()":"javascript: '"+A+"'",9==p("ie")?(this.editingArea.appendChild(w),w.src=T):(w.setAttribute("src",T),this.editingArea.appendChild(w)),"LI"===l.nodeName&&(l.lastChild.style.marginTop="-1.2em"),r.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var e=d.getComputedStyle(this.domNode),t="<div id='dijitEditorBody'></div>",i=[e.fontWeight,e.fontSize,e.fontFamily].join(" "),n=e.lineHeight;n=n.indexOf("px")>=0?parseFloat(n)/parseFloat(e.fontSize):n.indexOf("em")>=0?parseFloat(n):"normal";var s="",r=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/gi,function(e){e=e.replace(/^;/gi,"")+";";var t=e.split(":")[0];if(t){t=u.trim(t),t=t.toLowerCase();var i,n="";for(i=0;i<t.length;i++){var o=t.charAt(i);switch(o){case"-":i++,o=t.charAt(i).toUpperCase();default:n+=o}}d.set(r.domNode,n,"")}s+=e+";"});var a=f('label[for="'+this.id+'"]'),l="";return a.length?l=a[0].innerHTML:this["aria-label"]?l=this["aria-label"]:this["aria-labelledby"]&&(l=o.byId(this["aria-labelledby"]).innerHTML),this.iframe.setAttribute("title",l),["<!DOCTYPE html>",this.isLeftToRight()?"<html lang='"+this.lang+"'>\n<head>\n":"<html dir='rtl' lang='"+this.lang+"'>\n<head>\n",l?"<title>"+l+"</title>":"","<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n","\t}\n","\tbody,html,#dijitEditorBody { outline: none; }","html { height: 100%; width: 100%; overflow: hidden; }\n",this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",i,";\n",this.height||p("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",n,";\n","\t}\n","\tp{ margin: 1em 0; }\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",p("ie")?"":"\tli{ min-height:1.2em; }\n","</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body role='main' ","onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+s+"'>",t,"</body>\n</html>"].join("")},_applyEditingAreaStyleSheets:function(){var e=[];this.styleSheets&&(e=this.styleSheets.split(";"),this.styleSheets=""),e=e.concat(this.editingAreaStyleSheets),this.editingAreaStyleSheets=[];for(var t,i="",n=0,o=y.get(this.ownerDocument);t=e[n++];){var s=new C(o.location,t).toString();this.editingAreaStyleSheets.push(s),i+='<link rel="stylesheet" type="text/css" href="'+s+'"/>'}return i},addStyleSheet:function(t){var i=t.toString(),n=y.get(this.ownerDocument);("."===i.charAt(0)||"/"!==i.charAt(0)&&!t.host)&&(i=new C(n.location,i).toString()),e.indexOf(this.editingAreaStyleSheets,i)>-1||(this.editingAreaStyleSheets.push(i),this.onLoadDeferred.then(u.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(i);else{var e=this.document.getElementsByTagName("head")[0],t=this.document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=i,e.appendChild(t)}})))},removeStyleSheet:function(t){var i=t.toString(),n=y.get(this.ownerDocument);("."===i.charAt(0)||"/"!==i.charAt(0)&&!t.host)&&(i=new C(n.location,i).toString());var o=e.indexOf(this.editingAreaStyleSheets,i);o!==-1&&(delete this.editingAreaStyleSheets[o],f('link[href="'+i+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(e){if(e=!!e,this._set("disabled",e),this.isLoaded){var t=p("ie")&&(this.isLoaded||!this.focusOnLoad);
if(t&&(this.editNode.unselectable="on"),this.editNode.contentEditable=!e,this.editNode.tabIndex=e?"-1":this.tabIndex,t&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")}),p("mozilla")&&!e&&this._mozSettingProps){var i,n=this._mozSettingProps;for(i in n)if(n.hasOwnProperty(i))try{this.document.execCommand(i,!1,n[i])}catch(e){}}this._disabledOK=!0}},onLoad:function(t){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=T.registerIframe(this.iframe)),this.editNode=this.document.body.firstChild;var i=this;this.beforeIframeNode=a.place("<div tabIndex=-1></div>",this.iframe,"before"),this.afterIframeNode=a.place("<div tabIndex=-1></div>",this.iframe,"after"),this.iframe.onfocus=this.document.onfocus=function(){i.editNode.focus()},this.focusNode=this.editNode;var n=this.events.concat(this.captureEvents),o=this.iframe?this.document:this.editNode;if(this.own.apply(this,e.map(n,function(e){var t=e.toLowerCase().replace(/^on/,"");return m(o,t,u.hitch(this,e))},this)),this.own(m(o,"mouseup",u.hitch(this,"onClick"))),p("ie")&&(this.own(m(this.document,"mousedown",u.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1),p("webkit")&&(this._webkitListener=this.own(m(this.document,"mouseup",u.hitch(this,"onDisplayChanged")))[0],this.own(m(this.document,"mousedown",u.hitch(this,function(e){var t=e.target;!t||t!==this.document.body&&t!==this.document||this.defer("placeCursorAtEnd")})))),p("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(e){}this.isLoaded=!0,this.set("disabled",this.disabled);var s=u.hitch(this,function(){this.setValue(t),this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0),this.onDisplayChanged(),this.focusOnLoad&&g(u.hitch(this,"defer","focus",this.updateInterval)),this.value=this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(s):s()},onKeyDown:function(t){if(t.keyCode===c.SHIFT||t.keyCode===c.ALT||t.keyCode===c.META||t.keyCode===c.CTRL)return!0;if(t.keyCode===c.TAB&&this.isTabIndent&&(t.stopPropagation(),t.preventDefault(),this.queryCommandEnabled(t.shiftKey?"outdent":"indent")&&this.execCommand(t.shiftKey?"outdent":"indent")),t.keyCode==c.TAB&&!this.isTabIndent&&!t.ctrlKey&&!t.altKey)return t.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),!0;p("ie")<9&&t.keyCode===c.BACKSPACE&&"Control"===this.document.selection.type&&(t.stopPropagation(),t.preventDefault(),this.execCommand("delete")),p("ff")&&(t.keyCode!==c.PAGE_UP&&t.keyCode!==c.PAGE_DOWN||this.editNode.clientHeight>=this.editNode.scrollHeight&&t.preventDefault());var i=this._keyHandlers[t.keyCode],n=arguments;return i&&!t.altKey&&e.some(i,function(e){if(!(e.shift^t.shiftKey||e.ctrl^(t.ctrlKey||t.metaKey)))return e.handler.apply(this,n)||t.preventDefault(),!0},this),this.defer("onKeyPressed",1),!0},onKeyUp:function(){},setDisabled:function(e){h.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2),this.set("disabled",e)},_setValueAttr:function(e){this.setValue(e)},_setDisableSpellCheckAttr:function(e){this.document?s.set(this.document.body,"spellcheck",!e):this.onLoadDeferred.then(u.hitch(this,function(){s.set(this.document.body,"spellcheck",!e)})),this._set("disableSpellCheck",e)},addKeyHandler:function(e,t,i,n){"string"==typeof e&&(e=e.toUpperCase().charCodeAt(0)),u.isArray(this._keyHandlers[e])||(this._keyHandlers[e]=[]),this._keyHandlers[e].push({shift:i||!1,ctrl:t||!1,handler:n})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(e){this.onDisplayChanged(e)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(e){(p("ie")||p("trident"))&&this.defer(function(){T.curNode||this.ownerDocumentBody.focus()}),this.inherited(arguments);var t=this.getValue(!0);t!==this.value&&this.onChange(t),this._set("value",t)},_onFocus:function(e){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!p("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){return this.isLoaded?void(p("ie")<9?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus()):void(this.focusOnLoad=!0)},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove(),this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(e,t){var i=e.toLowerCase();return"formatblock"===i?p("safari")&&void 0===t&&(i="heading"):"hilitecolor"!==i||p("mozilla")||(i="backcolor"),i},_qcaCache:{},queryCommandAvailable:function(e){var t=this._qcaCache[e];return void 0!==t?t:this._qcaCache[e]=this._queryCommandAvailable(e)},_queryCommandAvailable:function(e){function t(e){return{ie:Boolean(e&i),mozilla:Boolean(e&n),webkit:Boolean(e&o),opera:Boolean(e&s)}}var i=1,n=2,o=4,s=8,r=null;switch(e.toLowerCase()){case"bold":case"italic":case"underline":case"subscript":case"superscript":case"fontname":case"fontsize":case"forecolor":case"hilitecolor":case"justifycenter":case"justifyfull":case"justifyleft":case"justifyright":case"delete":case"selectall":case"toggledir":r=t(n|i|o|s);break;case"createlink":case"unlink":case"removeformat":case"inserthorizontalrule":case"insertimage":case"insertorderedlist":case"insertunorderedlist":case"indent":case"outdent":case"formatblock":case"inserthtml":case"undo":case"redo":case"strikethrough":case"tabindent":r=t(n|i|s|o);break;case"blockdirltr":case"blockdirrtl":case"dirltr":case"dirrtl":case"inlinedirltr":case"inlinedirrtl":r=t(i);break;case"cut":case"copy":case"paste":r=t(i|n|o|s);break;case"inserttable":r=t(n|i);break;case"insertcell":case"insertcol":case"insertrow":case"deletecells":case"deletecols":case"deleterows":case"mergecells":case"splitcell":r=t(i|n);break;default:return!1}return(p("ie")||p("trident"))&&r.ie||p("mozilla")&&r.mozilla||p("webkit")&&r.webkit||p("opera")&&r.opera},execCommand:function(e,t){var i;if(this.focused&&this.focus(),e=this._normalizeCommand(e,t),void 0!==t){if("heading"===e)throw new Error("unimplemented");"formatblock"===e&&(p("ie")||p("trident"))&&(t="<"+t+">")}var n="_"+e+"Impl";return this[n]?i=this[n](t):(t=arguments.length>1?t:null,(t||"createlink"!==e)&&(i=this.document.execCommand(e,!1,t))),this.onDisplayChanged(),i},queryCommandEnabled:function(e){if(this.disabled||!this._disabledOK)return!1;e=this._normalizeCommand(e);var t="_"+e+"EnabledImpl";return this[t]?this[t](e):this._browserQueryCommandEnabled(e)},queryCommandState:function(e){if(this.disabled||!this._disabledOK)return!1;e=this._normalizeCommand(e);try{return this.document.queryCommandState(e)}catch(e){return!1}},queryCommandValue:function(e){if(this.disabled||!this._disabledOK)return!1;var t;if(e=this._normalizeCommand(e),(p("ie")||p("trident"))&&"formatblock"===e)t=this._native2LocalFormatNames[this.document.queryCommandValue(e)];else if(p("mozilla")&&"hilitecolor"===e){var i;try{i=this.document.queryCommandValue("styleWithCSS")}catch(e){i=!1}this.document.execCommand("styleWithCSS",!1,!0),t=this.document.queryCommandValue(e),this.document.execCommand("styleWithCSS",!1,i)}else t=this.document.queryCommandValue(e);return t},_sCall:function(e,t){return this.selection[e].apply(this.selection,t)},placeCursorAtStart:function(){this.focus();var e=!1;if(p("mozilla"))for(var t=this.editNode.firstChild;t;){if(3===t.nodeType){if(t.nodeValue.replace(/^\s+|\s+$/g,"").length>0){e=!0,this.selection.selectElement(t);break}}else if(1===t.nodeType){e=!0;var i=t.tagName?t.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(i)?this.selection.selectElement(t):this.selection.selectElementChildren(t);break}t=t.nextSibling}else e=!0,this.selection.selectElementChildren(this.editNode);e&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var e=!1;if(p("mozilla"))for(var t=this.editNode.lastChild;t;){if(3===t.nodeType){if(t.nodeValue.replace(/^\s+|\s+$/g,"").length>0){e=!0,this.selection.selectElement(t);break}}else if(1===t.nodeType){e=!0,this.selection.selectElement(t.lastChild||t);break}t=t.previousSibling}else e=!0,this.selection.selectElementChildren(this.editNode);e&&this.selection.collapse(!1)},getValue:function(e){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,e):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(e){if(!this.isLoaded)return void this.onLoadDeferred.then(u.hitch(this,function(){this.setValue(e)}));if(!this.textarea||!this.isClosed&&this.isLoaded){e=this._preFilterContent(e);var t=this.isClosed?this.domNode:this.editNode;t.innerHTML=e,this._preDomFilterContent(t)}else this.textarea.value=e;this.onDisplayChanged(),this._set("value",this.getValue(!0))},replaceValue:function(e){this.isClosed?this.setValue(e):this.window&&this.window.getSelection&&!p("mozilla")?this.setValue(e):this.window&&this.window.getSelection?(e=this._preFilterContent(e),this.execCommand("selectall"),this.execCommand("inserthtml",e),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(e),this._set("value",this.getValue(!0))},_preFilterContent:function(t){var i=t;return e.forEach(this.contentPreFilters,function(e){e&&(i=e(i))}),i},_preDomFilterContent:function(t){t=t||this.editNode,e.forEach(this.contentDomPreFilters,function(e){e&&u.isFunction(e)&&e(t)},this)},_postFilterContent:function(t,i){var n;return u.isString(t)?n=t:(t=t||this.editNode,this.contentDomPostFilters.length&&(i&&(t=u.clone(t)),e.forEach(this.contentDomPostFilters,function(e){t=e(t)})),n=S.getChildrenHtml(t)),u.trim(n.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(n=""),e.forEach(this.contentPostFilters,function(e){n=e(n)}),n},_saveContent:function(){var e=o.byId(k._scopeName+"._editor.RichText.value");e&&(e.value&&(e.value+=this._SEPARATOR),e.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(e,t){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),t||(e=e.replace(/'/gm,"&#39;")),e},getNodeHtml:function(e){return h.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2),S.getNodeHtml(e)},getNodeChildrenHtml:function(e){return h.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2),S.getChildrenHtml(e)},close:function(e){if(!this.isClosed){if(arguments.length||(e=!0),e&&this._set("value",this.getValue(!0)),this.interval&&clearInterval(this.interval),this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener),p("ie")&&(this.iframe.onfocus=null),this.iframe._loadFunc=null,this._iframeRegHandle&&(this._iframeRegHandle.remove(),delete this._iframeRegHandle),this.textarea){var t=this.textarea.style;t.position="",t.left=t.top="",p("ie")&&(t.overflow=this.__overflow,this.__overflow=null),this.textarea.value=this.value,a.destroy(this.domNode),this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe,r.remove(this.domNode,this.baseClass),this.isClosed=!0,this.isLoaded=!1,delete this.editNode,delete this.focusNode,this.window&&this.window._frameElement&&(this.window._frameElement=null),this.window=null,this.document=null,this.editingArea=null,this.editorObject=null}},destroy:function(){this.isClosed||this.close(!1),this._updateTimer&&this._updateTimer.remove(),this.inherited(arguments),x._globalSaveHandler&&delete x._globalSaveHandler[this.id]},_removeMozBogus:function(e){return e.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(e){return e=e.replace(/\sclass="webkit-block-placeholder"/gi,""),e=e.replace(/\sclass="apple-style-span"/gi,""),e=e.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(e){return e.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_preFixUrlAttributes:function(e){return e.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")},_browserQueryCommandEnabled:function(e){if(!e)return!1;var t=p("ie")<9?this.document.selection.createRange():this.document;try{return t.queryCommandEnabled(e)}catch(e){return!1}},_createlinkEnabledImpl:function(){var e=!0;if(p("opera")){var t=this.window.getSelection();e=!!t.isCollapsed||this.document.queryCommandEnabled("createlink")}else e=this._browserQueryCommandEnabled("createlink");return e},_unlinkEnabledImpl:function(){var e=!0;return e=p("mozilla")||p("webkit")?this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var e=!0;return e=!(!p("mozilla")&&!p("webkit"))||this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var e=!0;if(p("webkit")){var t=this.window.getSelection();t&&(t=t.toString()),e=!!t}else e=this._browserQueryCommandEnabled("cut");return e},_copyEnabledImpl:function(){var e=!0;if(p("webkit")){var t=this.window.getSelection();t&&(t=t.toString()),e=!!t}else e=this._browserQueryCommandEnabled("copy");return e},_pasteEnabledImpl:function(){var e=!0;return!!p("webkit")||(e=this._browserQueryCommandEnabled("paste"))},_inserthorizontalruleImpl:function(e){return p("ie")?this._inserthtmlImpl("<hr>"):this.document.execCommand("inserthorizontalrule",!1,e)},_unlinkImpl:function(e){if(this.queryCommandEnabled("unlink")&&(p("mozilla")||p("webkit"))){var t=this.selection.getAncestorElement("a");return this.selection.selectElement(t),this.document.execCommand("unlink",!1,null)}return this.document.execCommand("unlink",!1,e)},_hilitecolorImpl:function(e){var t,i=this._handleTextColorOrProperties("hilitecolor",e);return i||(p("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),console.log("Executing color command."),t=this.document.execCommand("hilitecolor",!1,e),this.document.execCommand("styleWithCSS",!1,!1)):t=this.document.execCommand("hilitecolor",!1,e)),t},_backcolorImpl:function(e){p("ie")&&(e=e?e:null);var t=this._handleTextColorOrProperties("backcolor",e);return t||(t=this.document.execCommand("backcolor",!1,e)),t},_forecolorImpl:function(e){p("ie")&&(e=e?e:null);var t=!1;return t=this._handleTextColorOrProperties("forecolor",e),t||(t=this.document.execCommand("forecolor",!1,e)),t},_inserthtmlImpl:function(e){e=this._preFilterContent(e);var t=!0;if(p("ie")<9){var i=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var n=i.item(0);i.length;)i.remove(i.item(0));n.outerHTML=e}else i.pasteHTML(e);i.select()}else if(p("trident")<8){var i,o=w.getSelection(this.window);if(o&&o.rangeCount&&o.getRangeAt){i=o.getRangeAt(0),i.deleteContents();var s=a.create("div");s.innerHTML=e;for(var r,l,n=this.document.createDocumentFragment();r=s.firstChild;)l=n.appendChild(r);i.insertNode(n),l&&(i=i.cloneRange(),i.setStartAfter(l),i.collapse(!1),o.removeAllRanges(),o.addRange(i))}}else p("mozilla")&&!e.length?this.selection.remove():t=this.document.execCommand("inserthtml",!1,e);return t},_boldImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("bold")),t||(t=this.document.execCommand("bold",!1,e)),t},_italicImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("italic")),t||(t=this.document.execCommand("italic",!1,e)),t},_underlineImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("underline")),t||(t=this.document.execCommand("underline",!1,e)),t},_strikethroughImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("strikethrough")),t||(t=this.document.execCommand("strikethrough",!1,e)),t},_superscriptImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("superscript")),t||(t=this.document.execCommand("superscript",!1,e)),t},_subscriptImpl:function(e){var t=!1;return p("ie")&&(this._adaptIESelection(),t=this._adaptIEFormatAreaAndExec("subscript")),t||(t=this.document.execCommand("subscript",!1,e)),t},_fontnameImpl:function(e){var t;return p("ie")&&(t=this._handleTextColorOrProperties("fontname",e)),t||(t=this.document.execCommand("fontname",!1,e)),t},_fontsizeImpl:function(e){var t;return p("ie")&&(t=this._handleTextColorOrProperties("fontsize",e)),t||(t=this.document.execCommand("fontsize",!1,e)),t},_insertorderedlistImpl:function(e){var t=!1;return p("ie")&&(t=this._adaptIEList("insertorderedlist",e)),t||(t=this.document.execCommand("insertorderedlist",!1,e)),t},_insertunorderedlistImpl:function(e){var t=!1;return p("ie")&&(t=this._adaptIEList("insertunorderedlist",e)),t||(t=this.document.execCommand("insertunorderedlist",!1,e)),t},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(e){var t=0;if(e&&e.childNodes){var i;for(i=0;i<e.childNodes.length;i++){var n=l.position(e.childNodes[i]);t+=n.h}}return t},_isNodeEmpty:function(e,t){return 1===e.nodeType?!(e.childNodes.length>0)||this._isNodeEmpty(e.childNodes[0],t):3===e.nodeType&&""===e.nodeValue.substring(t)},_removeStartingRangeFromRange:function(e,t){if(e.nextSibling)t.setStart(e.nextSibling,0);else{for(var i=e.parentNode;i&&null==i.nextSibling;)i=i.parentNode;i&&t.setStart(i.nextSibling,0)}return t},_adaptIESelection:function(){var e=w.getSelection(this.window);if(e&&e.rangeCount&&!e.isCollapsed){for(var t=e.getRangeAt(0),i=t.startContainer,n=t.startOffset;3===i.nodeType&&n>=i.length&&i.nextSibling;)n-=i.length,i=i.nextSibling;for(var o=null;this._isNodeEmpty(i,n)&&i!==o;)o=i,t=this._removeStartingRangeFromRange(i,t),i=t.startContainer,n=0;e.removeAllRanges(),e.addRange(t)}},_adaptIEFormatAreaAndExec:function(t){var i,n,o,s,r,l,d,h,c=w.getSelection(this.window),u=this.document;if(!(t&&c&&c.isCollapsed))return!1;var m=this.queryCommandValue(t);if(m){var f=this._tagNamesForCommand(t);o=c.getRangeAt(0);var g=o.startContainer;if(3===g.nodeType){var p=o.endOffset;g.length<p&&(n=this._adjustNodeAndOffset(i,p),g=n.node,p=n.offset)}for(var v;g&&g!==this.editNode;){var b=g.tagName?g.tagName.toLowerCase():"";if(e.indexOf(f,b)>-1){v=g;break}g=g.parentNode}if(v){i=o.startContainer;var C=u.createElement(v.tagName);if(a.place(C,v,"after"),i&&3===i.nodeType){var y,_,N=o.endOffset;i.length<N&&(n=this._adjustNodeAndOffset(i,N),i=n.node,N=n.offset),s=i.nodeValue,r=u.createTextNode(s.substring(0,N));var E=s.substring(N,s.length);E&&(l=u.createTextNode(E)),a.place(r,i,"before"),l&&(d=u.createElement("span"),d.className="ieFormatBreakerSpan",a.place(d,i,"after"),a.place(l,d,"after"),l=d),a.destroy(i);for(var S,T=r.parentNode,k=[];T!==v;){var x=T.tagName;S={tagName:x},k.push(S);var A=u.createElement(x);if(T.style&&A.style&&T.style.cssText&&(A.style.cssText=T.style.cssText,S.cssText=T.style.cssText),"FONT"===T.tagName&&(T.color&&(A.color=T.color,S.color=T.color),T.face&&(A.face=T.face,S.face=T.face),T.size&&(A.size=T.size,S.size=T.size)),T.className&&(A.className=T.className,S.className=T.className),l)for(y=l;y;)_=y.nextSibling,A.appendChild(y),y=_;A.tagName==T.tagName?(d=u.createElement("span"),d.className="ieFormatBreakerSpan",a.place(d,T,"after"),a.place(A,d,"after")):a.place(A,T,"after"),r=T,l=A,T=T.parentNode}if(l)for(y=l,(1===y.nodeType||3===y.nodeType&&y.nodeValue)&&(C.innerHTML="");y;)_=y.nextSibling,C.appendChild(y),y=_;var R;if(k.length){S=k.pop();var L=u.createElement(S.tagName);for(S.cssText&&L.style&&(L.style.cssText=S.cssText),S.className&&(L.className=S.className),"FONT"===S.tagName&&(S.color&&(L.color=S.color),S.face&&(L.face=S.face),S.size&&(L.size=S.size)),a.place(L,C,"before");k.length;){S=k.pop();var I=u.createElement(S.tagName);S.cssText&&I.style&&(I.style.cssText=S.cssText),S.className&&(I.className=S.className),"FONT"===S.tagName&&(S.color&&(I.color=S.color),S.face&&(I.face=S.face),S.size&&(I.size=S.size)),L.appendChild(I),L=I}h=u.createTextNode("."),d.appendChild(h),L.appendChild(h),R=w.create(this.window),R.setStart(h,0),R.setEnd(h,h.length),c.removeAllRanges(),c.addRange(R),this.selection.collapse(!1),h.parentNode.innerHTML=""}else d=u.createElement("span"),d.className="ieFormatBreakerSpan",h=u.createTextNode("."),d.appendChild(h),a.place(d,C,"before"),R=w.create(this.window),R.setStart(h,0),R.setEnd(h,h.length),c.removeAllRanges(),c.addRange(R),this.selection.collapse(!1),h.parentNode.innerHTML="";return C.firstChild||a.destroy(C),!0}}return!1}if(o=c.getRangeAt(0),i=o.startContainer,i&&3===i.nodeType){var p=o.startOffset;i.length<p&&(n=this._adjustNodeAndOffset(i,p),i=n.node,p=n.offset),s=i.nodeValue,r=u.createTextNode(s.substring(0,p));var E=s.substring(p);""!==E&&(l=u.createTextNode(s.substring(p))),d=u.createElement("span"),h=u.createTextNode("."),d.appendChild(h),r.length?a.place(r,i,"after"):r=i,a.place(d,r,"after"),l&&a.place(l,d,"after"),a.destroy(i);var R=w.create(this.window);return R.setStart(h,0),R.setEnd(h,h.length),c.removeAllRanges(),c.addRange(R),u.execCommand(t),a.place(d.firstChild,d,"before"),a.destroy(d),R.setStart(h,0),R.setEnd(h,h.length),c.removeAllRanges(),c.addRange(R),this.selection.collapse(!1),h.parentNode.innerHTML="",!0}},_adaptIEList:function(e){var t=w.getSelection(this.window);if(t.isCollapsed&&t.rangeCount&&!this.queryCommandValue(e)){var i=t.getRangeAt(0),n=i.startContainer;if(n&&3==n.nodeType&&!i.startOffset){var o="ul";"insertorderedlist"===e&&(o="ol");var s=this.document.createElement(o),r=a.create("li",null,s);a.place(s,n,"before"),r.appendChild(n),a.create("br",null,s,"after");var l=w.create(this.window);return l.setStart(n,0),l.setEnd(n,n.length),t.removeAllRanges(),t.addRange(l),this.selection.collapse(!0),!0}}return!1},_handleTextColorOrProperties:function(e,t){var i,n,o,s,r,l,h,c,u=w.getSelection(this.window),m=this.document;if(t=t||null,e&&u&&u.isCollapsed&&u.rangeCount&&(o=u.getRangeAt(0),i=o.startContainer,i&&3===i.nodeType)){var f=o.startOffset;i.length<f&&(n=this._adjustNodeAndOffset(i,f),i=n.node,f=n.offset),s=i.nodeValue,r=m.createTextNode(s.substring(0,f));var g=s.substring(f);""!==g&&(l=m.createTextNode(s.substring(f))),h=m.createElement("span"),c=m.createTextNode("."),h.appendChild(c);var v=m.createElement("span");h.appendChild(v),r.length?a.place(r,i,"after"):r=i,a.place(h,r,"after"),l&&a.place(l,h,"after"),a.destroy(i);var b=w.create(this.window);if(b.setStart(c,0),b.setEnd(c,c.length),u.removeAllRanges(),u.addRange(b),p("webkit")){var C="color";"hilitecolor"!==e&&"backcolor"!==e||(C="backgroundColor"),d.set(h,C,t),this.selection.remove(),a.destroy(v),h.innerHTML="&#160;",this.selection.selectElement(h),this.focus()}else this.execCommand(e,t),a.place(h.firstChild,h,"before"),a.destroy(h),b.setStart(c,0),b.setEnd(c,c.length),u.removeAllRanges(),u.addRange(b),this.selection.collapse(!1),c.parentNode.removeChild(c);return!0}return!1},_adjustNodeAndOffset:function(e,t){for(;e.length<t&&e.nextSibling&&3===e.nextSibling.nodeType;)t-=e.length,e=e.nextSibling;return{node:e,offset:t}},_tagNamesForCommand:function(e){return"bold"===e?["b","strong"]:"italic"===e?["i","em"]:"strikethrough"===e?["s","strike"]:"superscript"===e?["sup"]:"subscript"===e?["sub"]:"underline"===e?["u"]:[]},_stripBreakerNodes:function(e){if(this.isLoaded)return f(".ieFormatBreakerSpan",e).forEach(function(e){for(;e.firstChild;)a.place(e.firstChild,e,"before");a.destroy(e)}),e},_stripTrailingEmptyNodes:function(e){function t(e){return/^(p|div|br)$/i.test(e.nodeName)&&0==e.children.length&&/^[\s\xA0]*$/.test(e.textContent||e.innerText||"")||3===e.nodeType&&/^[\s\xA0]*$/.test(e.nodeValue)}for(;e.lastChild&&t(e.lastChild);)a.destroy(e.lastChild);return e},_setTextDirAttr:function(e){this._set("textDir",e),this.onLoadDeferred.then(u.hitch(this,function(){this.editNode.dir=e}))}});return x}.apply(null,n),!(void 0!==o&&(e.exports=o))},155:function(e,t,i){var n,o;n=[i(4),i(9),i(25)],o=function(e,t,i){var n=window,o={addOnWindowUnload:function(o,s){e.windowUnloaded||i(n,"unload",e.windowUnloaded=function(){}),i(n,"unload",t.hitch(o,s))},addOnUnload:function(e,o){i(n,"beforeunload",t.hitch(e,o))}};return e.addOnWindowUnload=o.addOnWindowUnload,e.addOnUnload=o.addOnUnload,o}.apply(null,n),!(void 0!==o&&(e.exports=o))},156:function(e,t,i){var n,o;n=[i(13),i(14),i(9),i(10),i(15),i(62)],o=function(e,t,i,n,o,s){var r=function(r){var a=r.document;this.getType=function(){if(a.getSelection){var e,t="text";try{e=r.getSelection()}catch(e){}if(e&&1==e.rangeCount){var i=e.getRangeAt(0);i.startContainer==i.endContainer&&i.endOffset-i.startOffset==1&&3!=i.startContainer.nodeType&&(t="control")}return t}return a.selection.type.toLowerCase()},this.getSelectedText=function(){if(a.getSelection){var e=r.getSelection();return e?e.toString():""}return"control"==this.getType()?null:a.selection.createRange().text},this.getSelectedHtml=function(){if(a.getSelection){var e=r.getSelection();if(e&&e.rangeCount){var t,i="";for(t=0;t<e.rangeCount;t++){var n=e.getRangeAt(t).cloneContents(),o=a.createElement("div");o.appendChild(n),i+=o.innerHTML}return i}return null}return"control"==this.getType()?null:a.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(a.getSelection){var e=r.getSelection();return e.anchorNode.childNodes[e.anchorOffset]}var t=a.selection.createRange();if(t&&t.item)return a.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var e=this.getSelectedElement();if(e)return e.parentNode}else{if(!a.getSelection){var t=a.selection.createRange();return t.collapse(!0),t.parentElement()}var i=a.getSelection();if(i){for(var n=i.anchorNode;n&&1!=n.nodeType;)n=n.parentNode;return n}}return null},this.hasAncestorElement=function(e){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(e){var t=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(t,arguments)},this.isTag=function(e,t){if(e&&e.tagName)for(var i=e.tagName.toLowerCase(),n=0;n<t.length;n++){var o=String(t[n]).toLowerCase();if(i==o)return o}return""},this.getParentOfType=function(e,t){for(;e;){if(this.isTag(e,t).length)return e;e=e.parentNode}return null},this.collapse=function(e){if(a.getSelection){var t=r.getSelection();t.removeAllRanges?e?t.collapseToStart():t.collapseToEnd():t.collapse(e)}else{var i=a.selection.createRange();i.collapse(e),i.select()}},this.remove=function(){var e=a.selection;return a.getSelection?(e=r.getSelection(),e.deleteFromDocument(),e):("none"!=e.type.toLowerCase()&&e.clear(),e)},this.selectElementChildren=function(e,i){var o;if(e=t.byId(e),a.getSelection){var s=r.getSelection();n("opera")?(o=s.rangeCount?s.getRangeAt(0):a.createRange(),o.setStart(e,0),o.setEnd(e,3==e.nodeType?e.length:e.childNodes.length),s.addRange(o)):s.selectAllChildren(e)}else if(o=e.ownerDocument.body.createTextRange(),o.moveToElementText(e),!i)try{o.select()}catch(e){}},this.selectElement=function(e,i){var s;if(e=t.byId(e),a.getSelection){var r=a.getSelection();s=a.createRange(),r.removeAllRanges&&(n("opera")&&r.getRangeAt(0)&&(s=r.getRangeAt(0)),s.selectNode(e),r.removeAllRanges(),r.addRange(s))}else try{var l=e.tagName?e.tagName.toLowerCase():"";s="img"===l||"table"===l?o.body(a).createControlRange():o.body(a).createRange(),s.addElement(e),i||s.select()}catch(t){this.selectElementChildren(e,i)}},this.inSelection=function(e){if(e){var t,i;if(a.getSelection){var n=r.getSelection();if(n&&n.rangeCount>0&&(i=n.getRangeAt(0)),i&&i.compareBoundaryPoints&&a.createRange)try{if(t=a.createRange(),t.setStart(e,0),1===i.compareBoundaryPoints(i.START_TO_END,t))return!0}catch(e){}}else{i=a.selection.createRange();try{t=e.ownerDocument.body.createTextRange(),t.moveToElementText(e)}catch(e){}if(i&&t&&1===i.compareEndPoints("EndToStart",t))return!0}}return!1},this.getBookmark=function(){var e,t,i,n=a.selection,o=s.curNode;if(a.getSelection){if(n=r.getSelection())if(n.isCollapsed){if(i=o?o.tagName:"",i&&(i=i.toLowerCase(),"textarea"==i||"input"==i&&(!o.type||"text"==o.type.toLowerCase())))return n={start:o.selectionStart,end:o.selectionEnd,node:o,pRange:!0},{isCollapsed:n.end<=n.start,mark:n};e={isCollapsed:!0},n.rangeCount&&(e.mark=n.getRangeAt(0).cloneRange())}else t=n.getRangeAt(0),e={isCollapsed:!1,mark:t.cloneRange()}}else if(n){if(i=o?o.tagName:"",i=i.toLowerCase(),o&&i&&("button"==i||"textarea"==i||"input"==i))return n.type&&"none"==n.type.toLowerCase()?{isCollapsed:!0,mark:null}:(t=n.createRange(),{isCollapsed:!t.text||!t.text.length,mark:{range:t,pRange:!0}});e={};try{t=n.createRange(),e.isCollapsed=!("Text"==n.type?t.htmlText.length:t.length)}catch(t){return e.isCollapsed=!0,e}if("CONTROL"==n.type.toUpperCase())if(t.length){e.mark=[];for(var l=0,d=t.length;l<d;)e.mark.push(t.item(l++))}else e.isCollapsed=!0,e.mark=null;else e.mark=t.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return e},this.moveToBookmark=function(t){var n=t.mark;if(n)if(a.getSelection){var o=r.getSelection();if(o&&o.removeAllRanges)if(n.pRange){var s=n.node;s.selectionStart=n.start,s.selectionEnd=n.end}else o.removeAllRanges(),o.addRange(n);else console.warn("No idea how to restore selection for this browser!")}else if(a.selection&&n){var l;n.pRange?l=n.range:i.isArray(n)?(l=a.body.createControlRange(),e.forEach(n,function(e){l.addElement(e)})):(l=a.body.createTextRange(),l.moveToBookmark(n)),l.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},a=new r(window);return a.SelectionManager=r,a}.apply(null,n),!(void 0!==o&&(e.exports=o))},157:function(e,t,i){var n,o;n=[i(13),i(33),i(9)],o=function(e,t,i){var n={getIndex:function(e,t){for(var i,n,o=[],s=[],r=e;e!=t;){var a=0;for(i=e.parentNode;n=i.childNodes[a++];)if(n===e){--a;break}o.unshift(a),s.unshift(a-i.childNodes.length),e=i}if(o.length>0&&3==r.nodeType){for(n=r.previousSibling;n&&3==n.nodeType;)o[o.length-1]--,n=n.previousSibling;for(n=r.nextSibling;n&&3==n.nodeType;)s[s.length-1]++,n=n.nextSibling}return{o:o,r:s}},getNode:function(t,n){if(!i.isArray(t)||0==t.length)return n;var o=n;return e.every(t,function(e){return e>=0&&e<o.childNodes.length?(o=o.childNodes[e],!0):(o=null,!1)}),o},getCommonAncestor:function(e,t,i){i=i||e.ownerDocument.body;for(var n=function(e){for(var t=[];e&&(t.unshift(e),e!==i);)e=e.parentNode;return t},o=n(e),s=n(t),r=Math.min(o.length,s.length),a=o[0],l=1;l<r&&o[l]===s[l];l++)a=o[l];return a},getAncestor:function(e,t,i){for(i=i||e.ownerDocument.body;e&&e!==i;){var n=e.nodeName.toUpperCase();if(t.test(n))return e;e=e.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(e,t,i){i=i||e.ownerDocument.body,t=t||n.BlockTagNames;for(var o,s=null;e&&e!==i;){var r=e.nodeName.toUpperCase();!s&&t.test(r)&&(s=e),!o&&/^(?:BODY|TD|TH|CAPTION)$/.test(r)&&(o=e),e=e.parentNode}return{blockNode:s,blockContainer:o||e.ownerDocument.body}},atBeginningOfContainer:function(e,t,i){var n=!1,o=0==i;if(o||3!=t.nodeType||/^[\s\xA0]+$/.test(t.nodeValue.substr(0,i))&&(o=!0),o){var s=t;for(n=!0;s&&s!==e;){if(s.previousSibling){n=!1;break}s=s.parentNode}}return n},atEndOfContainer:function(e,t,i){var n=!1,o=i==(t.length||t.childNodes.length);if(o||3!=t.nodeType||/^[\s\xA0]+$/.test(t.nodeValue.substr(i))&&(o=!0),o){var s=t;for(n=!0;s&&s!==e;){if(s.nextSibling){n=!1;break}s=s.parentNode}}return n},adjacentNoneTextNode:function(e,t){for(var i=e,n=0-e.length||0,o=t?"nextSibling":"previousSibling";i&&3==i.nodeType;)n+=i.length,
i=i[o];return[i,n]},create:function(e){return e=e||window,e.getSelection?e.document.createRange():new s},getSelection:function(e,t){if(e.getSelection)return e.getSelection();var i=new o.selection(e);return t||i._getCurrentSelection(),i}};if(!window.getSelection)var o=n.ie={cachedSelection:{},selection:function(e){this._ranges=[],this.addRange=function(e,t){this._ranges.push(e),t||e._select(),this.rangeCount=this._ranges.length},this.removeAllRanges=function(){this._ranges=[],this.rangeCount=0};var t=function(){var t=e.document.selection.createRange(),i=e.document.selection.type.toUpperCase();return new s("CONTROL"==i?o.decomposeControlRange(t):o.decomposeTextRange(t))};this.getRangeAt=function(e){return this._ranges[e]},this._getCurrentSelection=function(){this.removeAllRanges();var e=t();e?(this.addRange(e,!0),this.isCollapsed=e.collapsed):this.isCollapsed=!0}},decomposeControlRange:function(e){var t=e.item(0),i=e.item(e.length-1),o=t.parentNode,s=i.parentNode,r=n.getIndex(t,o).o[0],a=n.getIndex(i,s).o[0]+1;return[o,r,s,a]},getEndPoint:function(t,i){var o=t.duplicate();o.collapse(!i);var s,r,a,l="EndTo"+(i?"End":"Start"),d=o.parentElement();if(d.childNodes.length>0?e.every(d.childNodes,function(e,i){var h;if(3!=e.nodeType){if(o.moveToElementText(e),o.compareEndPoints(l,t)>0){if(!a||3!=a.nodeType)return s=d,r=i,!1;s=a,h=!0}else if(i==d.childNodes.length-1)return s=d,r=d.childNodes.length,!1}else i==d.childNodes.length-1&&(s=e,h=!0);if(h&&s){var c=n.adjacentNoneTextNode(s)[0];s=c?c.nextSibling:d.firstChild;var u=n.adjacentNoneTextNode(s);c=u[0];var m=u[1];return c?(o.moveToElementText(c),o.collapse(!1)):o.moveToElementText(d),o.setEndPoint(l,t),r=o.text.length-m,!1}return a=e,!0}):(s=d,r=0),!i&&1==s.nodeType&&r==s.childNodes.length){var h=s.nextSibling;h&&3==h.nodeType&&(s=h,r=0)}return[s,r]},setEndPoint:function(e,t,i){var o,s,r=e.duplicate();if(3!=t.nodeType)if(i>0){if(o=t.childNodes[i-1])if(3==o.nodeType)t=o,i=o.length;else if(o.nextSibling&&3==o.nextSibling.nodeType)t=o.nextSibling,i=0;else{r.moveToElementText(o.nextSibling?o:t);var a=o.parentNode,l=a.insertBefore(o.ownerDocument.createTextNode(" "),o.nextSibling);r.collapse(!1),a.removeChild(l)}}else r.moveToElementText(t),r.collapse(!0);if(3==t.nodeType){var d=n.adjacentNoneTextNode(t),h=d[0];s=d[1],h?(r.moveToElementText(h),r.collapse(!1),"inherit"!=h.contentEditable&&s++):(r.moveToElementText(t.parentNode),r.collapse(!0),r.move("character",1),r.move("character",-1)),i+=s,i>0&&r.move("character",i)!=i&&console.error("Error when moving!")}return r},decomposeTextRange:function(e){var t=o.getEndPoint(e),i=t[0],n=t[1],s=t[0],r=t[1];return e.htmlText.length&&(e.htmlText==e.text?r=n+e.text.length:(t=o.getEndPoint(e,!0),s=t[0],r=t[1])),[i,n,s,r]},setRange:function(e,t,i,n,s,r){var a=o.setEndPoint(e,t,i);if(e.setEndPoint("StartToStart",a),!r)var l=o.setEndPoint(e,n,s);return e.setEndPoint("EndToEnd",l||a),e}},s=n.W3CRange=t(null,{constructor:function(){arguments.length>0?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.startContainer!==this.endContainer?this.commonAncestorContainer=n.getCommonAncestor(this.startContainer,this.endContainer):this.commonAncestorContainer=this.startContainer,this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(e,t){t=parseInt(t),this.startContainer===e&&this.startOffset==t||(delete this._cachedBookmark,this.startContainer=e,this.startOffset=t,this.endContainer?this._updateInternal():this.setEnd(e,t))},setEnd:function(e,t){t=parseInt(t),this.endContainer===e&&this.endOffset==t||(delete this._cachedBookmark,this.endContainer=e,this.endOffset=t,this.startContainer?this._updateInternal():this.setStart(e,t))},setStartAfter:function(e,t){this._setPoint("setStart",e,t,1)},setStartBefore:function(e,t){this._setPoint("setStart",e,t,0)},setEndAfter:function(e,t){this._setPoint("setEnd",e,t,1)},setEndBefore:function(e,t){this._setPoint("setEnd",e,t,0)},_setPoint:function(e,t,i,o){var s=n.getIndex(t,t.parentNode).o;this[e](t.parentNode,s.pop()+o)},_getIERange:function(){var e=(this._body||this.endContainer.ownerDocument.body).createTextRange();return o.setRange(e,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed),e},getBookmark:function(){return this._getIERange(),this._cachedBookmark},_select:function(){var e=this._getIERange();e.select()},deleteContents:function(){var e=this.startContainer,t=this._getIERange();3!==e.nodeType||this.startOffset||this.setStartBefore(e),t.pasteHTML(""),this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.collapsed=!0},cloneRange:function(){var e=new s([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);return e._body=this._body,e},detach:function(){this._body=null,this.commonAncestorContainer=null,this.startContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0}});return i.setObject("dijit.range",n),n}.apply(null,n),!(void 0!==o&&(e.exports=o))},158:function(e,t,i){var n,o;n=[i(13),i(9),i(10)],o=function(e,t,i){var n={};t.setObject("dijit._editor.html",n);var o=n.escapeXml=function(e,t){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),t||(e=e.replace(/'/gm,"&#39;")),e};return n.getNodeHtml=function(e){var t=[];return n.getNodeHtmlHelper(e,t),t.join("")},n.getNodeHtmlHelper=function(t,s){switch(t.nodeType){case 1:var r=t.nodeName.toLowerCase();if(!r||"/"==r.charAt(0))return"";s.push("<",r);var a,l=[],d={};if(i("dom-attributes-explicit")||i("dom-attributes-specified-flag"))for(var h=0;a=t.attributes[h++];){var c=a.name;if("_dj"!==c.substr(0,3)&&(!i("dom-attributes-specified-flag")||a.specified)&&!(c in d)){var u=a.value;"src"!=c&&"href"!=c||t.getAttribute("_djrealurl")&&(u=t.getAttribute("_djrealurl")),8===i("ie")&&"style"===c&&(u=u.replace("HEIGHT:","height:").replace("WIDTH:","width:")),l.push([c,u]),d[c]=u}}else{var m=/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1),f=m.outerHTML,g=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,p=f.match(g);f=f.substr(0,f.indexOf(">")),e.forEach(p,function(e){if(e){var i=e.indexOf("=");if(i>0){var n=e.substring(0,i);if("_dj"!=n.substr(0,3)){if(("src"==n||"href"==n)&&t.getAttribute("_djrealurl"))return void l.push([n,t.getAttribute("_djrealurl")]);var o,s;switch(n){case"style":o=t.style.cssText.toLowerCase();break;case"class":o=t.className;break;case"width":if("img"===r){s=/width=(\S+)/i.exec(f),s&&(o=s[1]);break}case"height":if("img"===r){s=/height=(\S+)/i.exec(f),s&&(o=s[1]);break}default:o=t.getAttribute(n)}null!=o&&l.push([n,o.toString()])}}}},this)}l.sort(function(e,t){return e[0]<t[0]?-1:e[0]==t[0]?0:1});for(var v=0;a=l[v++];)s.push(" ",a[0],'="',"string"==typeof a[1]?o(a[1],!0):a[1],'"');switch(r){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":s.push(" />");break;case"script":s.push(">",t.innerHTML,"</",r,">");break;default:s.push(">"),t.hasChildNodes()&&n.getChildrenHtmlHelper(t,s),s.push("</",r,">")}break;case 4:case 3:s.push(o(t.nodeValue,!0));break;case 8:s.push("<!--",o(t.nodeValue,!0),"-->");break;default:s.push("<!-- Element not recognized - Type: ",t.nodeType," Name: ",t.nodeName,"-->")}},n.getChildrenHtml=function(e){var t=[];return n.getChildrenHtmlHelper(e,t),t.join("")},n.getChildrenHtmlHelper=function(e,t){if(e)for(var o,s=e.childNodes||e,r=!i("ie")||s!==e,a=0;o=s[a++];)r&&o.parentNode!=e||n.getNodeHtmlHelper(o,t)},n}.apply(null,n),!(void 0!==o&&(e.exports=o))},159:function(e,t,i){i(160),e.exports=i(116)("dijit/_editor/nls/commands")},160:function(e,t,i){!(e.exports={root:{bold:"Bold",copy:"Copy",cut:"Cut",delete:"Delete",indent:"Indent",insertHorizontalRule:"Horizontal Rule",insertOrderedList:"Numbered List",insertUnorderedList:"Bullet List",italic:"Italic",justifyCenter:"Align Center",justifyFull:"Justify",justifyLeft:"Align Left",justifyRight:"Align Right",outdent:"Outdent",paste:"Paste",redo:"Redo",removeFormat:"Remove Format",selectAll:"Select All",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",underline:"Underline",undo:"Undo",unlink:"Remove Link",createLink:"Create Link",toggleDir:"Toggle Direction",insertImage:"Insert Image",insertTable:"Insert/Edit Table",toggleTableBorder:"Toggle Table Border",deleteTable:"Delete Table",tableProp:"Table Property",htmlToggle:"HTML Source",foreColor:"Foreground Color",hiliteColor:"Background Color",plainFormatBlock:"Paragraph Style",formatBlock:"Paragraph Style",fontSize:"Font Size",fontName:"Font Name",tabIndent:"Tab Indent",fullScreen:"Toggle Full Screen",viewSource:"View HTML Source",print:"Print",newPage:"New Page",systemShortcut:'The "${0}" action is only available in your browser using a keyboard shortcut. Use ${1}.',ctrlKey:"ctrl+${0}",appleKey:"⌘${0}"},zh:!0,"zh-tw":!0,uk:!0,tr:!0,th:!0,sv:!0,sl:!0,sk:!0,ru:!0,ro:!0,pt:!0,"pt-pt":!0,pl:!0,nl:!0,nb:!0,ko:!0,kk:!0,ja:!0,it:!0,id:!0,hu:!0,hr:!0,he:!0,fr:!0,fi:!0,es:!0,el:!0,de:!0,da:!0,cs:!0,ca:!0,bg:!0,az:!0,ar:!0})}});
//# sourceMappingURL=3.bundle.js.map